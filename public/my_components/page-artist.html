<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<!--my_components-->
<link rel="import" href="show-dialog.html">
<link rel="import" href="x-album.html">


<dom-module id="page-artist">
    <template>
        <style>
            .flex-wrap {
                @apply(--layout-horizontal);
                @apply(--layout-wrap);
            }
            .artistname{
                font-size: 34px;
                line-height: 34px;
                padding-top: 3%;
                padding-right: 24px;
                padding-bottom: 14px;
                padding-left: 24px;
            }
            paper-material{
                margin-bottom: 5%;
            }
            #externalLink{
                padding-right: 24px;
                padding-bottom: 14px;
                padding-left: 24px;
            }
            a{
                text-decoration: blink;
            }
            paper-icon-button {
                /*permet de ne pas d√©former les icones*/
                font-size: 0;
                padding: 6px;
            }
        </style>
        <paper-material elevation="1">

            <iron-ajax id="get_content" auto url="/search/artist/{{_encodeUri(nameArtist)}}" last-response="{{artist}}" handleAs="json"> </iron-ajax>
            <template is="dom-if" if="{{artist.rdf.length}}">
                <show-dialog labeldialog="RDF {{artist.name}} :" labelbutton="Show RDF" content="{{artist.rdf}}" labelexitdialog="Close"></show-dialog>
            </template>
            <div class="artistname">{{artist.name}}</div>
            <div id="externalLink">
                <a href="{{artist.urlWikipedia}}" target="_blank" tabindex="-1"><paper-icon-button src="../img/wikipedia_icon.svg" ></paper-icon-button></a>
                <a href="{{artist.urlFacebook}}" target="_blank" tabindex="-1"><paper-icon-button  src="../img/facebook_icon.svg"></paper-icon-button></a>
                <a href="{{artist.urlTwitter}}"  target="_blank"tabindex="-1"><paper-icon-button  src="../img/twitter_icon.svg"></paper-icon-button></a>
                <a href="{{artist.urlMySpace}}" target="_blank" tabindex="-1"><paper-icon-button  src="../img/myspace_icon.svg"></paper-icon-button></a>
                <a href="{{artist.urlOfficialWebsite}}" target="_blank" tabindex="-1"><paper-icon-button  src="../img/website_icon.svg"></paper-icon-button></a>
            </div>



            {{artist.locationInfo}}
            {{artist.activeYears}}
            {{artist.genres}}
            {{artist.labels}}
            {{artist.members}}
            {{artist.formerMembers}}
            <!--<div id="testBenchmark"></div>-->
            <template class="flex-wrap" is="dom-repeat" items="{{artist.albums}}" initial-count="1" as="album" ><!--initial-count="1"-->
                <x-album album={{album}}></x-album>
            </template>

        </paper-material>
    </template>

    <script>
        // element registration
        Polymer({
            is: "page-artist",
            // add properties and methods on the element's prototype
            properties: {
                artist:{
                    type: Object,
                    value: {}
                },
                route:{
                    type:String
                }
            },
            ready: function(e){
            },
//    handleResponse: function(){
//        console.log("JSStart");
//        var i = 0;
//        var element = document.getElementById("testBenchmark");
//        var artistLength = this.artist.albums.length
//        var start = Date.now();
//        for(i;i<artistLength;i++){
//            var xalbum = document.createElement("x-album");
//            xalbum.album = this.artist.albums[i];
//            element.appendChild(xalbum);
//            var j = 0;
//            var albumLength = this.artist.albums[i].songs.length;
//            for(j;j<albumLength;j++){
//                var xsong = document.createElement("x-song");
//
////                var node = document.createTextNode(this.artist.albums[i].songs[j].titre);
////                xsong.appendChild(node);
//
//                xsong.album = this.artist.albums[i];
//                xsong.editing = false;
//                xsong.song=this.artist.albums[i].songs[j];
//
//                element.appendChild(xsong);
//            }
//        }
//        for(i;i<54000;i++){
//            var xsong = document.createElement("p");
//
//            var node = document.createTextNode("teste fzehuif hzeuif hzeuifh");
//            xsong.appendChild(node);
//
////                xsong.album = this.artist.albums[i];
////                xsong.editing = false;
////                xsong.song=this.artist.albums[i].songs[j];
//
//            element.appendChild(xsong);
//        }
//        console.log(Date.now() - start);
//        console.log("JSFini");
//    },
            _stringify: function(obj){
                return JSON.stringify(obj);
            },
            _encodeUri : function(nameArtist){
                return encodeURIComponent(nameArtist);
            },
        });

    </script>
</dom-module>