<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">

<!--my_components-->
<link rel="import" href="show-dialog.html">
<link rel="import" href="x-album.html">


<dom-module id="page-artist">
    <template>
        <style>
            .flex-wrap {
                @apply(--layout-horizontal);
                @apply(--layout-wrap);
            }
            .artistname{
                font-size: 34px;
                line-height: 34px;
                padding-top: 3%;
                padding-right: 24px;
                padding-bottom: 14px;
                padding-left: 24px;
            }
            paper-material{
                margin-bottom: 5%;
            }
            #externalLink{
                padding-right: 24px;
                padding-bottom: 14px;
                padding-left: 24px;
            }
            summary:hover{
                cursor: hand;
            }
            .inherit:focus{
                outline-width: 0px;
                color: inherit;
                background-color: inherit;
                text-decoration:none;
            }
            .collapse-content {
                padding: 15px;
            }
            ul{
                padding: 15px;
                margin-left: 24px;
            }
            a{
                text-decoration: blink;
            }
            .infosArtist{
                margin-left: 24px;
            }
            paper-icon-button {
                /*permet de ne pas déformer les icones*/
                font-size: 0;
                padding: 6px;
            }
        </style>
        <paper-material elevation="1">

            <iron-ajax id="get_content" auto url="/search/artist/{{_encodeUri(nameArtist)}}" last-response="{{artist}}" handleAs="json"> </iron-ajax>
            <template is="dom-if" if="{{artist.rdf.length}}">
                <show-dialog labeldialog="RDF {{artist.name}} :" labelbutton="Show RDF" content="{{artist.rdf}}" labelexitdialog="Close"></show-dialog>
            </template>
            <div class="artistname">{{artist.name}}</div>
            <div id="externalLink">
                <template is="dom-if" if="{{artist.urlWikipedia.length}}">
                    <a href="{{artist.urlWikipedia}}" target="_blank" tabindex="-1"><paper-icon-button src="../img/wikipedia_icon.svg" ></paper-icon-button></a>
                </template>
                <template is="dom-if" if="{{artist.urlFacebook.length}}">
                    <a href="{{artist.urlFacebook}}" target="_blank" tabindex="-1"><paper-icon-button  src="../img/facebook_icon.svg"></paper-icon-button></a>
                </template>
                <template is="dom-if" if="{{artist.urlTwitter.length}}">
                    <a href="{{artist.urlTwitter}}"  target="_blank"tabindex="-1"><paper-icon-button  src="../img/twitter_icon.svg"></paper-icon-button></a>
                </template>
                <template is="dom-if" if="{{artist.urlMySpace.length}}">
                    <a href="{{artist.urlMySpace}}" target="_blank" tabindex="-1"><paper-icon-button  src="../img/myspace_icon.svg"></paper-icon-button></a>
                </template>
                <template is="dom-if" if="{{artist.urlOfficialWebsite.length}}">
                    <a href="{{artist.urlOfficialWebsite}}" target="_blank" tabindex="-1"><paper-icon-button  src="../img/website_icon.svg"></paper-icon-button></a>
                </template>
            </div>

            <div class="infosArtist">
                <template is="dom-if" if="{{artist.activeYears.length}}">
                    <div><b>Années d'activité:</b> {{artist.activeYears}}</div>
                </template>
                <template is="dom-if" if="{{artist.locationInfo.length}}">
                    <div><b>Localisation:</b> {{artist.locationInfo}}</div>
                </template>
                <template is="dom-if" if="{{artist.genres.length}}">
                    <div><b>Genre:</b> {{artist.genres}}</div>
                </template>
                <template is="dom-if" if="{{artist.labels.length}}">
                    <div><b>Label:</b> {{artist.labels}}</div>
                </template>
                <template id="domIfMember" is="dom-if" if="{{artist.members.length}}" restamp>
                    <details>
                        <summary class="inherit">Voir les membres actuels:</summary>
                            <ul class="collapse-content">
                                <template is="dom-repeat" items="{{artist.members}}" as="member" >
                                    <li>{{member.name}}</li>
                                    <ul>
                                        <li>Instrument:
                                            <template is="dom-repeat" items="{{member.instruments}}" as="instrument" >
                                                {{instrument}}
                                            </template>
                                        </li>
                                        <li>Années d'activités:
                                            <template is="dom-repeat" items="{{member.activeYears}}" as="activeYears" >
                                                {{activeYears}}
                                            </template>
                                        </li>
                                    </ul>
                                </template>
                            </ul>
                    </details>
                </template>
                <template id="domIfFormerMember" is="dom-if" if="{{artist.formerMembers.length}}">
                    <details>
                        <summary class="inherit">Voir les ancien(s) membre(s):</summary>
                                <ul class="collapse-content">
                                    <template is="dom-repeat" items="{{artist.formerMembers}}" as="formerMember" >
                                        <li>{{formerMember.name}}</li>
                                        <ul>
                                            <li>Instrument:
                                                <template is="dom-repeat" items="{{formerMember.instruments}}" as="instrument" >
                                                    {{instrument}}
                                                </template>
                                            </li>
                                            <li>Années d'activités:
                                                <template is="dom-repeat" items="{{formerMember.activeYears}}" as="activeYears" >
                                                    {{activeYears}}
                                                </template>
                                            </li>
                                        </ul>
                                    </template>
                                </ul>
                        </summary>
                    </details>
                </template>
            </div>



            <template class="flex-wrap" is="dom-repeat" items="{{artist.albums}}" as="album" initial-count="1" ><!-- -->
                <x-album album={{album}}></x-album>
            </template>

        </paper-material>
    </template>

    <script>
        // element registration
        Polymer({
            is: "page-artist",
            // add properties and methods on the element's prototype
            properties: {
                artist:{
                    type: Object,
                    value: {}
                },
            },
            ready: function(e){
            },
            _stringify: function(obj){
                return JSON.stringify(obj);
            },
            _encodeUri : function(nameArtist){
                return encodeURIComponent(nameArtist);
            },
        });

    </script>
</dom-module>