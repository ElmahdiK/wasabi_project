<link href="../bower_components/polymer/polymer.html" rel="import">
<link href="../bower_components/iron-ajax/iron-ajax.html" rel="import">
<link href="../bower_components/paper-material/paper-material.html" rel="import">
<link href="../bower_components/paper-button/paper-button.html" rel="import">


<!--
<link href="../bower_components/paper-ripple/paper-ripple.html" rel="import">
-->



<dom-module id="page-category">
   <template>
        <style>
            .flex-wrap {
                @apply(--layout-horizontal);
                @apply(--layout-wrap);
            }
            paper-material{
                margin-bottom: 5%;
            }            
        </style>
        <paper-material elevation="1">
            <iron-ajax id="get_content" auto url="/search/category/{{_encodeUri(collection)}}/{{_encodeUri(categoryName)}}" last-response="{{categories}}" handleAs="json"> </iron-ajax>
            <template class="flex-wrap" is="dom-repeat" items="{{categories}}" as="categorie" initial-count="1" >
                <paper-button on-tap='doLoadCategorie' id="#/search/artist/{{_encodeUri(categorie.name)}}/album/{{_encodeUri(categorie.albumTitre)}}/song/{{_encodeUri(categorie.titre)}}" raised>
                    {{categorie.titre}} - {{categorie.name}} - {{categorie.albumTitre}}
                </paper-button>
            </template>
        </paper-material>
    </template>

<script>
  // element registration
  Polymer({
    is: "page-category",
    // add properties and methods on the element's prototype
    properties: {
    },
    ready: function(e){   
        console.log("DAS LE COMPOSANNNNNNNT");
    },
    doLoadCategorie:function(e){
        window.location.href = e.target.id;
    },
    _encodeUri : function(nameArtist){
        return encodeURIComponent(nameArtist);
    },    
  });  

</script>   
</dom-module>    
